2021-12-01 10:21:11.338 +01:00 [INF] Application is starting
2021-12-01 10:21:13.026 +01:00 [INF] User profile is available. Using 'C:\Users\sturol01\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-12-01 10:21:13.639 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2021-12-01 10:21:13.639 +01:00 [INF] Hosting environment: Development
2021-12-01 10:21:13.639 +01:00 [INF] Content root path: C:\Users\sturol01\Documents\O Reily Tutorials\NET\ASP Net\HotelListing\HotelListing
2021-12-01 10:21:13.693 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/index.html - -
2021-12-01 10:21:14.158 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 453.3262ms
2021-12-01 10:21:14.159 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2021-12-01 10:21:14.201 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 11946 application/javascript;+charset=utf-8 35.8543ms
2021-12-01 10:21:14.440 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2021-12-01 10:21:14.610 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 169.1887ms
2021-12-01 10:21:32.289 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:21:32.297 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:21:32.337 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:21:32.389 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:21:32.922 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:21:33.778 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:21:36.144 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:21:36.488 +01:00 [ERR] Something went wrong in Login
2021-12-01 10:21:36.499 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-12-01 10:21:36.562 +01:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 4167.9807ms
2021-12-01 10:21:36.563 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:21:36.568 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61 - 500 241 application/problem+json;+charset=utf-8 4279.3006ms
2021-12-01 10:22:15.916 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:22:15.918 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:22:15.928 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:22:15.928 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:22:15.939 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:22:36.729 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:22:36.738 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:22:56.213 +01:00 [ERR] Something went wrong in Login
2021-12-01 10:22:56.214 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-12-01 10:22:56.215 +01:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 40286.5356ms
2021-12-01 10:22:56.215 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:22:56.216 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61 - 500 241 application/problem+json;+charset=utf-8 40299.6890ms
2021-12-01 10:24:12.070 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:24:12.071 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:24:12.071 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:24:12.071 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:24:12.081 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:24:16.044 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:24:16.049 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:25:10.388 +01:00 [ERR] Something went wrong in Login
2021-12-01 10:25:10.389 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-12-01 10:25:10.390 +01:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 58318.0197ms
2021-12-01 10:25:10.390 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:25:10.390 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61 - 500 241 application/problem+json;+charset=utf-8 58320.1748ms
2021-12-01 10:25:14.269 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:25:14.270 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:25:14.270 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:25:14.270 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:25:14.271 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:25:14.272 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:25:14.277 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:31:07.298 +01:00 [INF] Application is starting
2021-12-01 10:31:09.111 +01:00 [INF] User profile is available. Using 'C:\Users\sturol01\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-12-01 10:31:11.429 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2021-12-01 10:31:11.429 +01:00 [INF] Hosting environment: Development
2021-12-01 10:31:11.429 +01:00 [INF] Content root path: C:\Users\sturol01\Documents\O Reily Tutorials\NET\ASP Net\HotelListing\HotelListing
2021-12-01 10:31:11.759 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/index.html - -
2021-12-01 10:31:12.208 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2021-12-01 10:31:12.217 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 452.2805ms
2021-12-01 10:31:12.250 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 11946 application/javascript;+charset=utf-8 41.1517ms
2021-12-01 10:31:12.487 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2021-12-01 10:31:12.639 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 151.2176ms
2021-12-01 10:31:28.321 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:31:28.328 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:31:28.369 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:31:28.447 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:31:28.972 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:31:29.818 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:31:32.067 +01:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:31:32.322 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-12-01 10:31:32.453 +01:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-12-01 10:31:32.500 +01:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 4048.603ms
2021-12-01 10:31:32.501 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:31:32.507 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61 - 202 317 application/json;+charset=utf-8 4185.9981ms
2021-12-01 10:34:30.962 +01:00 [INF] Application is starting
2021-12-01 10:34:33.137 +01:00 [INF] User profile is available. Using 'C:\Users\sturol01\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-12-01 10:34:33.629 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2021-12-01 10:34:33.629 +01:00 [INF] Hosting environment: Development
2021-12-01 10:34:33.629 +01:00 [INF] Content root path: C:\Users\sturol01\Documents\O Reily Tutorials\NET\ASP Net\HotelListing\HotelListing
2021-12-01 10:34:33.679 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/index.html - -
2021-12-01 10:34:34.060 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 383.4295ms
2021-12-01 10:34:34.076 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2021-12-01 10:34:34.103 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 11946 application/javascript;+charset=utf-8 27.1040ms
2021-12-01 10:34:34.338 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2021-12-01 10:34:34.485 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 147.6677ms
2021-12-01 10:34:47.816 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel - -
2021-12-01 10:34:47.880 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.HotelController.GetHotels (HotelListing)'
2021-12-01 10:34:47.922 +01:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels() on controller HotelListing.Controllers.HotelController (HotelListing).
2021-12-01 10:34:49.158 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:34:49.960 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[CountryId], [h].[Name], [h].[Rating]
FROM [Hotels] AS [h]
2021-12-01 10:34:50.064 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelListing.Models.HotelTO, HotelListing, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-12-01 10:34:50.228 +01:00 [INF] Executed action HotelListing.Controllers.HotelController.GetHotels (HotelListing) in 2295.2358ms
2021-12-01 10:34:50.229 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.HotelController.GetHotels (HotelListing)'
2021-12-01 10:34:50.239 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel - - - 200 297 application/json;+charset=utf-8 2422.5211ms
2021-12-01 10:34:59.534 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel/1 - -
2021-12-01 10:34:59.543 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-12-01 10:34:59.657 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-12-01 10:34:59.661 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel/1 - - - 401 - - 126.7598ms
2021-12-01 10:36:18.102 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel/1 - -
2021-12-01 10:36:18.107 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-12-01 10:36:18.272 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-12-01 10:36:18.356 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-12-01 10:36:18.357 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel/1 - - - 401 - - 255.5326ms
2021-12-01 10:37:47.366 +01:00 [INF] Application is starting
2021-12-01 10:37:49.385 +01:00 [INF] User profile is available. Using 'C:\Users\sturol01\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-12-01 10:37:50.018 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2021-12-01 10:37:50.018 +01:00 [INF] Hosting environment: Development
2021-12-01 10:37:50.018 +01:00 [INF] Content root path: C:\Users\sturol01\Documents\O Reily Tutorials\NET\ASP Net\HotelListing\HotelListing
2021-12-01 10:37:50.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/index.html - -
2021-12-01 10:37:50.477 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 384.9278ms
2021-12-01 10:37:50.508 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2021-12-01 10:37:50.574 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 11946 application/javascript;+charset=utf-8 65.6232ms
2021-12-01 10:37:50.811 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2021-12-01 10:37:51.021 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.0160ms
2021-12-01 10:38:00.072 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel/1 - -
2021-12-01 10:38:00.393 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-12-01 10:38:00.442 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-12-01 10:38:00.447 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-12-01 10:38:00.454 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-12-01 10:38:00.455 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel/1 - - - 401 - - 383.5347ms
2021-12-01 10:49:33.508 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel - -
2021-12-01 10:49:33.520 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-12-01 10:49:33.520 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-12-01 10:49:33.521 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.HotelController.GetHotels (HotelListing)'
2021-12-01 10:49:33.572 +01:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels() on controller HotelListing.Controllers.HotelController (HotelListing).
2021-12-01 10:49:34.785 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:49:36.923 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[Address], [h].[CountryId], [h].[Name], [h].[Rating]
FROM [Hotels] AS [h]
2021-12-01 10:49:36.996 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelListing.Models.HotelTO, HotelListing, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-12-01 10:49:37.119 +01:00 [INF] Executed action HotelListing.Controllers.HotelController.GetHotels (HotelListing) in 3541.9672ms
2021-12-01 10:49:37.120 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.HotelController.GetHotels (HotelListing)'
2021-12-01 10:49:37.126 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel - - - 200 297 application/json;+charset=utf-8 3619.1946ms
2021-12-01 10:50:01.057 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:50:01.064 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:50:01.070 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:50:01.086 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:50:01.166 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:50:01.204 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:50:01.339 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:50:01.538 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-12-01 10:50:01.590 +01:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-12-01 10:50:01.601 +01:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 514.3317ms
2021-12-01 10:50:01.601 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:50:01.603 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61 - 202 317 application/json;+charset=utf-8 546.6159ms
2021-12-01 10:50:28.769 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel/1 - -
2021-12-01 10:50:28.775 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-12-01 10:50:28.775 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-12-01 10:50:28.776 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-12-01 10:50:28.776 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-12-01 10:50:28.779 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel/1 - - - 401 - - 10.5048ms
2021-12-01 10:54:11.868 +01:00 [INF] Application is starting
2021-12-01 10:54:14.764 +01:00 [INF] User profile is available. Using 'C:\Users\sturol01\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-12-01 10:54:15.337 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2021-12-01 10:54:15.337 +01:00 [INF] Hosting environment: Development
2021-12-01 10:54:15.337 +01:00 [INF] Content root path: C:\Users\sturol01\Documents\O Reily Tutorials\NET\ASP Net\HotelListing\HotelListing
2021-12-01 10:54:15.399 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/index.html - -
2021-12-01 10:54:15.966 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/index.html - - - 200 - text/html;charset=utf-8 475.0380ms
2021-12-01 10:54:16.013 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - -
2021-12-01 10:54:16.059 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/_framework/aspnetcore-browser-refresh.js - - - 200 11946 application/javascript;+charset=utf-8 44.9341ms
2021-12-01 10:54:16.214 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - -
2021-12-01 10:54:16.416 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44375/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.8489ms
2021-12-01 10:54:37.118 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61
2021-12-01 10:54:37.129 +01:00 [INF] CORS policy execution successful.
2021-12-01 10:54:37.307 +01:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:54:37.355 +01:00 [INF] Route matched with {action = "Login", controller = "Account", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-12-01 10:54:37.885 +01:00 [INF] Login attempt for user@example.com
2021-12-01 10:54:38.741 +01:00 [INF] Entity Framework Core 5.0.12 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-12-01 10:54:39.630 +01:00 [INF] Executed DbCommand (84ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-12-01 10:54:39.865 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-12-01 10:55:01.032 +01:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-12-01 10:55:01.086 +01:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 23725.1484ms
2021-12-01 10:55:01.087 +01:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-12-01 10:55:01.093 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44375/api/Account/login application/json-patch+json 61 - 202 349 application/json;+charset=utf-8 23974.5564ms
2021-12-01 10:55:37.955 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:44375/api/hotel/1 - -
2021-12-01 10:55:38.029 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-12-01 10:55:38.067 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-12-01 10:55:38.073 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-12-01 10:55:38.080 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-12-01 10:55:38.082 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:44375/api/hotel/1 - - - 401 - - 127.4798ms
